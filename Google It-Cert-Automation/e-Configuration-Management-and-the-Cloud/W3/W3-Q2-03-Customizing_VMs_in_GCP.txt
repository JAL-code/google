[Remember, cloud scale deployments are often comprised of hundreds or thousands of machines.]
[changes to that VM so that we can deploy it at scale.]
[Remember that a reference image is just a file or configuration that we can deploy repeatedly and with automated tools.]
[start by logging into the virtual machine we created in the last video.]
[ssh]
[use git which will let us clone the repository with the code for the app we want to deploy.]
[does not work]
[alternate]
[git clone https//www.github.com/google/it-cert-automation-practice.git]
[end alternate]
[Our script prints a single line saying that it's listening for connections on port 8000.]
[What's happening behind the scenes is that the application is opening a socket and listening for HTTP connections on that port.]
[running on port 8000.]
[script actually lets us pass the port number that it will open as a parameter.]
[run on the HTTP port that we configured in our last video which is port 80.]
[run it with admin privileges.]
[run it again with sudo and pass port 80 as the parameter.]
[Stop sudo 80.]
[visit the website served by our VM and see its contents.]
[web app is extra symbol.]
[prints Hello Cloud to the web page generated when we make a request. It also prints the Hostname and IP Address of the machine.]
[we need to configure this as a service.]
[This is a systemd file, which is the initializing system used by most modern Linux distributions.]
[notice that the configuration expects the script that we want to execute to be in /usr/local/bin.]
[copy that file over to there and then copy the service file to /etc/systemd/system,]
[directory used for configuring systemd services.]
[need to tell the systemctl command that we want to enable this service so that it runs automatically.]
[need to think about how we'll upgrade our web app when we want to make changes to it.]
[One option is to create a different reference image each time there's a new version of the app.]
[deleting all the old VMs]
[creating new ones based on the new image.]
[Another option is to add a configuration management system to the images so that we can use that to manage any changes after the VM's created.]
[We already know how to manage changes with Puppet.]
[Let's install the Puppet client in this instance so it's ready to use Puppet in the future.]
